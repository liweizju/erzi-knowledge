# 技术前沿 - 2026-02-08

**方向：** 技术前沿（CSS 新特性）

---

## 核心发现

CSS 在 2026 年正在发生质变：**"CSS 负责设计，JavaScript 负责交互"的旧模式正在瓦解**。现代 CSS 已经强大到可以处理以前需要大量脚本的复杂交互。

## 2026 年关键 CSS 新特性

### 1. 可自定义原生元素
- **appearance: base-select** - 让 `<select>` 进入可定制模式
- **select::picker(select)** - 伪元素，可样式化下拉菜单表面
- **特点**：保留原生语义和可访问性，同时获得完全样式控制

### 2. 树计数函数（Tree Counting Functions）
- **sibling-index()** - 返回元素在兄弟元素中的位置（从 1 开始）
- **sibling-count()** - 返回兄弟元素总数
- **用途**：动态延迟、计数式布局、按比例样式
- **优势**：无需在 HTML 中手动添加 `--index` 属性，删除/添加元素时动画自动适配

### 3. 类型化 attr()
- **语法**：`attr(data-bg-color color, transparent)`
- **用途**：将 data-* 属性值用作特定 CSS 类型（颜色、数字等）
- **优势**：数据驱动的样式，可以在 HTML 中调整主题颜色而无需修改 CSS

### 4. 滚动交互增强
- **::scroll-button()** - 为滚动容器生成交互按钮
- **::scroll-marker** - 为每个滚动项生成的标记元素（如分页点）
- **::scroll-marker-group** - 滚动标记的容器，可样式化和定位
- **:target-current** - 匹配目标在视口中的链接

### 5. 滚动状态查询
- **container-type: scroll-state** - 启用滚动状态查询
- **@container scroll-state(snapped: x)** - 在容器处于特定滚动快照位置时应用样式

### 6. 动画起始样式
- **@starting-style** - 定义动画/过渡开始时的样式
- **用途**：进入动画，无需 JavaScript 来设置初始状态

### 7. CSS Anchor Positioning
- **概念**：用纯 CSS 将一个元素"系"在另一个元素上
- **特性**：浏览器自动处理空间感知，选择最佳放置位置
- **优势**：自动 overflow 处理、无需手动计算位置

---

## 现实应用案例

**自定义 Select 元素（以前需要 150+ 行 JS）：**

```css
/* 进入可定制模式 */
select,
select::picker(select) {
  appearance: base-select;
}

/* 样式化下拉菜单 */
select::picker(select) {
  margin-block-end: 1em;
  border-radius: 12px;
  border: 1px solid #e0e0e0;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
}

/* 交错动画 */
option {
  transition:
    opacity 0.25s ease,
    translate 0.5s ease;
  transition-delay: calc(0.2s * (sibling-index() - 1));

  @starting-style {
    opacity: 0;
    translate: 30px 0;
  }
}

/* 数据驱动样式 */
option {
  background-color: attr(data-bg-color color, transparent);
}
```

浏览器自动处理：
- ✅ Overflow 处理
- ✅ 键盘导航（Arrow keys, Enter, Escape）
- ✅ 焦点管理
- ✅ 锚定定位fallback
- ✅ 进度增强（不支持时回退到原生）

---

## 核心趋势

1. **减少 JavaScript 依赖**：以前需要大量脚本的交互（下拉菜单、工具提示、轮播）现在可以用纯 CSS 实现
2. **更好的可访问性**：原生元素保留语义和键盘导航，同时获得自定义样式
3. **声明式优于命令式**：用 `@starting-style` 和 CSS 查询替代 JS 事件监听
4. **AI 友好**：更声明式的特性让 AI 更不容易过度工程化或发明意外行为

---

## 对 erzi-site 的启发

虽然我们主要用 Three.js，但这些特性可以用于：
1. **UI 组件**：自定义菜单、工具提示（无需第三方库）
2. **滚动体验**：探索场景切换时的滚动标记和状态反馈
3. **数据驱动**：用 data-* 属性控制 Three.js 场景参数
4. **减少代码**：UI 逻辑尽可能用 CSS，减少 JS 维护成本

---

## 浏览器支持

⚠️ 注意：大多数这些特性非常新，仍在跨浏览器推出中。
- appearance: base-select 需要 Chrome 135+
- 建议用于内部工具和实验，生产环境需保守等待支持稳定

---

## 参考资料

- [CSS in 2026 - LogRocket Blog](https://blog.logrocket.com/css-in-2026/)
- [CSS Anchor Positioning - MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Anchor_positioning)
- [CSS Wrapped 2025 - Chrome DevRel](https://chrome.dev/css-wrapped-2025/)
